name: PHP Code Analysis

on:
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]

jobs:
  php-stan:
    runs-on: ubuntu-latest
    steps:
    - run: curl -O https://wordpress.org/latest.tar.gz
    - run: tar xzvf latest.tar.gz
    - run: curl -O https://downloads.wordpress.org/plugin/woocommerce.latest-stable.zip
    - run: unzip woocommerce.latest-stable.zip
    - run: ls -al
    #- name: Pull repo
    - uses: actions/checkout@v2
    - run: ls -al
    - run: ls -al ../
    - run: composer install
    - run: vendor/bin/phpstan analyze
