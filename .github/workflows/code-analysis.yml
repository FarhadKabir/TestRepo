name: PHP Code Analysis

on:
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]

jobs:
  php-stan:
    runs-on: ubuntu-latest
    steps:
     #- run: mkdir /home/runner/work/TestRepo/TestRepo/
     - name: Install wordpress
       run: |
         curl -O https://wordpress.org/latest.tar.gz
         tar xzvf latest.tar.gz 
         rm latest.tar.gz
         pwd
         ls -al
     - name: Install woocommerce
       run: |
         curl -O https://downloads.wordpress.org/plugin/woocommerce.latest-stable.zip
         unzip woocommerce.latest-stable.zip 
         rm woocommerce.latest-stable.zip
         pwd
         ls -al
       working-directory: /home/runner/work/TestRepo/TestRepo/wordpress/wp-content/plugins
     #- name: install composer and run PhpStan
       #working-directory: /home/runner/work/TestRepo/wordpress/wp-content/plugins
     - uses: actions/checkout@v2 
       with: 
         path: '/home/runner/work/TestRepo/TestRepo/wordpress/wp-content/plugins'
     - run: ls -al /home/runner/work/TestRepo/TestRepo/wordpress/wp-content/plugins
      #   composer install
      #   vendor/bin/phpstan analyze
     #- name: Install wordpress and woocommerce
     #  working-directory: /home/runner/work/TestRepo
     #  run: |
     #    pwd
      #   ls -al
   
#    - run: vendor/bin/phpstan analyze
