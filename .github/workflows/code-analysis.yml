name: PHP Code Analysis

on:
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]

jobs:
  php-stan:
    runs-on: ubuntu-latest
    steps:
     - name: Install wordpress and woocommerce
       run: |
         curl -O https://wordpress.org/latest.tar.gz
         tar xzvf latest.tar.gz 
         curl -O https://downloads.wordpress.org/plugin/woocommerce.latest-stable.zip
         unzip woocommerce.latest-stable.zip 
       working-directory: /home/runner/work/TestRepo
     - name: install composer and run PhpStan
       uses: actions/checkout@v2
     - run: |
         pwd
         ls -al
     - name: Install wordpress and woocommerce
       working-directory: /home/runner/work/TestRepo
       run: |
         pwd
         ls -al
   # - run: tar xzvf latest.tar.gz 
   # - run: curl -O https://downloads.wordpress.org/plugin/woocommerce.latest-stable.zip
   # - run: unzip woocommerce.latest-stable.zip 
   # - run: pwd
   # - run: ls -al
   # - run: mkdir ./plugin-wordpress
   # - run: cd ./plugin-wordpress
   # - run: pwd
   # - run: ls -al
   # - name: Pull repo
   #   uses: actions/checkout@v2
   # - run: composer install
   # - name: test
   #   run: ls -al 
   #   working-directory: ./vendor

#    - run: vendor/bin/phpstan analyze
